+--------------------------------------------------------------------------------------------------+
|                                  MODEL CONTEXT PROTOCOL (MCP)                                    |
+--------------------------------------------------------------------------------------------------+

+------------------+                 +--------------------+                 +-------------------+
|      HOST        |                 |       CLIENT       |                 |       SERVER      |
| (LLM Application)|<--------------->| (Inside Host App)  |<--------------->| (Context Provider)|
+------------------+                 +--------------------+                 +-------------------+
                                            |      ^
                                            |      |
                                     +------v------+------+
                                     |   PROTOCOL LAYER   |
                                     +-------------------+
                                     | - Protocol class  |
                                     | - Request/Response|
                                     | - Notifications   |
                                     +------+------+-----+
                                            |      |
                                            |      |
                                     +------v------+------+
                                     |  TRANSPORT LAYER   |
                                     +-------------------+
                                     | - Stdio           |
                                     | - HTTP with SSE   |
                                     | - JSON-RPC 2.0    |
                                     +-------------------+

+--------------------------------------------------------------------------------------------------+
|                               CONNECTION LIFECYCLE                                               |
+--------------------------------------------------------------------------------------------------+
|                                                                                                  |
|  1. INITIALIZATION                2. MESSAGE EXCHANGE                 3. TERMINATION             |
|  +-----------------+              +-----------------+                 +-----------------+        |
|  | Client:         |              | Request-Response|                 | - clean close() |        |
|  | - initialize    |              | - Either party  |                 | - disconnection |        |
|  | Server:         |              |   can request   |                 | - errors        |        |
|  | - capabilities  |              |                 |                 |                 |        |
|  | Client:         |              | Notifications   |                 |                 |        |
|  | - initialized   |              | - One-way msgs  |                 |                 |        |
|  +-----------------+              +-----------------+                 +-----------------+        |
|                                                                                                  |
+--------------------------------------------------------------------------------------------------+

+--------------------------------------------------------------------------------------------------+
|                                   MESSAGE TYPES                                                  |
+--------------------------------------------------------------------------------------------------+
|                                                                                                  |
|  +----------------+    +----------------+    +----------------+    +-------------------+         |
|  |    REQUEST     |    |     RESULT     |    |     ERROR      |    |   NOTIFICATION    |         |
|  |----------------|    |----------------|    |----------------|    |-------------------|         |
|  | - method       |    | - result data  |    | - code         |    | - method          |         |
|  | - params       |    |                |    | - message      |    | - params          |         |
|  |                |    |                |    | - data         |    |                   |         |
|  +----------------+    +----------------+    +----------------+    +-------------------+         |
|                                                                                                  |
+--------------------------------------------------------------------------------------------------+

+--------------------------------------------------------------------------------------------------+
|                                   BEST PRACTICES                                                 |
+--------------------------------------------------------------------------------------------------+
|                                                                                                  |
|  +------------------+    +------------------+    +------------------+    +------------------+    |
|  | TRANSPORT CHOICE |    | MESSAGE HANDLING |    |    SECURITY      |    | DEBUGGING/MONITOR|    |
|  |------------------|    |------------------|    |------------------|    |------------------|    |
|  | - Local: stdio   |    | - Validation     |    | - TLS            |    | - Logging        |    |
|  | - Remote: HTTP   |    | - Error handling |    | - Authentication |    | - Diagnostics    |    |
|  |   with SSE       |    | - Progress       |    | - Rate limiting  |    | - Testing        |    |
|  +------------------+    +------------------+    +------------------+    +------------------+    |
|                                                                                                  |
+--------------------------------------------------------------------------------------------------+